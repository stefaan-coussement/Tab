/* tab.js - version 1.0.0-alpha.1+1, 2014-Mar-22 10:48, license MIT, copyright (c) 2014 Stefaan Coussement */
Tab=function(a){"use strict";function b(){return this instanceof b?c.apply(this,arguments):d.apply(this,arguments)}function c(){return Object.create(b.prototype)}function d(a){return a instanceof b?a:v.apply(c(),arguments)}function e(a){return a instanceof b}function f(){return l.apply(c(),arguments)}function g(){return u.apply(c(),arguments)}function h(){return v.apply(c(),arguments)}function i(){return w.apply(c(),arguments)}function j(){return x.apply(c(),arguments)}function k(){if(this instanceof b)return this._completed||(this.doThrow(new Error("cancelled")),this._completed="cancelled",b.X.notify(this,"cancelled"),this._callbacks=null),this;throw new TypeError("invalid subject")}function l(){return v.apply(this,arguments).settle()}function m(){if(this instanceof b)return"returned"===this._started;throw new TypeError("invalid subject")}function n(){if(this instanceof b)return"thrown"===this._started;throw new TypeError("invalid subject")}function o(){if(this instanceof b)return"cancelled"===this._completed;throw new TypeError("invalid subject")}function p(){if(this instanceof b)return"settled"===this._completed;throw new TypeError("invalid subject")}function q(a){var c;if(this instanceof b)return"settled"!==this._completed&&(c=b.X.defer({source:this,target:null},a),this._completed?b.Schedulers.scheduleNow(null,c):b.X.subscribe(null,this,"cancelled",c,{scheduler:b.Schedulers.scheduleNow})),this;throw new TypeError("invalid subject")}function r(a){var c;if(this instanceof b)return"returned"===this._started&&(c=b.X.defer({source:this,target:null},a),this._completed?b.Schedulers.scheduleNext(this,c):b.X.subscribe(this,this,"returned",c)),this;throw new TypeError("invalid subject")}function s(a){var c;if(this instanceof b)return"cancelled"!==this._completed&&(c=b.X.defer({source:this,target:null},a),this._completed?b.Schedulers.scheduleNext(this,c):b.X.subscribe(this,this,"settled",c)),this;throw new TypeError("invalid subject")}function t(a){var c;if(this instanceof b)return"thrown"===this._started&&(c=b.X.defer({source:this,target:null},a),this._completed?b.Schedulers.scheduleNext(this,c):b.X.subscribe(this,this,"thrown",c)),this;throw new TypeError("invalid subject")}function u(){return x.apply(this,arguments).settle()}function v(){if(this instanceof b){if(this._completed){if("cancelled"===this._completed)throw this._values[0].valueOf()}else this._values=arguments,this._started="returned",b.X.notify(this,"returned",arguments);return this}throw new TypeError("invalid subject")}function w(){if(this instanceof b){if(this._completed){if("cancelled"===this._completed)throw this._values[0].valueOf()}else this._completed="settled",b.X.notify(this,"settled"),this._callbacks=null;return this}throw new TypeError("invalid subject")}function x(){if(this instanceof b){if(this._completed){if("cancelled"===this._completed)throw this._values[0].valueOf()}else this._values=arguments,this._started="thrown",b.X.notify(this,"thrown",arguments);return this}throw new TypeError("invalid subject")}function y(){if(!(this instanceof b))return this.toString();if(this.hasReturned())return this._values.length>0&&null!=this._values[0]?this._values[0].toString():void 0;if(this.hasThrown())throw this._values.length>0&&null!=this._values[0]?this._values[0].valueOf():void 0}function z(){if(!(this instanceof b))return this.valueOf();if(this.hasReturned())return this._values.length>0&&null!=this._values[0]?this._values[0].valueOf():void 0;if(this.hasThrown())throw this._values.length>0&&null!=this._values[0]?this._values[0].valueOf():void 0}var A,B,C,D="1.0.0-alpha.1+1";return C=function(){try{var a={};return a.return=function(){},!0}catch(b){}}(),B={},Object.defineProperty(B,"target",{value:c(),enumerable:!0}),Object.defineProperty(b,"context",{get:function(){return B},configurable:!0,enumerable:!0}),A={},b.version=A,A.toString=function(){return D},A.valueOf=function(){return parseInt(D.split("+")[1],10)},b.construct=c,b.convert=d,b.isTab=e,b.newAccept=f,b.newReject=g,b.newReturn=h,b.newSettle=i,b.newThrow=j,b.prototype.cancel=k,b.prototype.accept=l,b.prototype.hasReturned=m,b.prototype.hasThrown=n,b.prototype.isCancelled=o,b.prototype.isSettled=p,b.prototype.onCancelled=q,b.prototype.onReturned=r,b.prototype.onSettled=s,b.prototype.onThrown=t,b.prototype.reject=u,b.prototype.doReturn=v,C&&(b.prototype.return=v),b.prototype.settle=w,b.prototype.doThrow=x,C&&(b.prototype.throw=x),b.prototype.toString=y,b.prototype.valueOf=z,b.Schedulers=function(){function b(a){var b=a.requester;b&&b.isCancelled()||a.callback()}function c(){var a;if(n+=1,l.length>0)for(a=l,l=[];a.length>0;)b(a.shift());if(0===l.length&&m.length>0)for(a=m,m=[];a.length>0;)if(b(a.shift()),l.length>0){m=a.concat(m);break}0===l.length&&0===m.length?i=!1:j(c)}function d(){i||(i=!0,j(c))}function e(a,b){a&&a.isCancelled()||(l.unshift({requester:a,callback:b}),d())}function f(a,b){a&&a.isCancelled()||(m.push({requester:a,callback:b}),d())}function g(a,b){a&&a.isCancelled()||(l.push({requester:a,callback:b}),d())}function h(a,b){a&&a.isCancelled()||b()}var i,j,k={},l=[],m=[],n=0;return j=a.setImmediate?a.setImmediate:function(b){return a.setTimeout(b,0)},Object.defineProperty(k,"tick",{get:function(){return n},configurable:!0,enumerable:!0}),k.scheduleFirst=e,k.scheduleLast=f,k.scheduleNext=g,k.scheduleNow=h,k}(),b.X=function(){function a(a,b,c){var d,e,f,g;return B._deferred===!1&&(B._deferred=!0),a?(d=a&&a.target,f=d&&(!c||!c.noUpdate),b?(g=function(a){var b=B;B=Object.create(B),Object.keys(a).forEach(function(b){Object.defineProperty(B,b,{value:a[b],enumerable:!0})}),Object.defineProperty(B,"context",{get:function(){return b}})},e=function(){var c;try{return g(a),B._deferred=!1,c=b.apply(this,arguments),this instanceof e&&"object"!=typeof c&&(c=this),f&&!B._deferred&&d.doReturn(c),c}catch(h){throw f&&d.doThrow(h),h}finally{B=B.context}},e.prototype=Object.create(b.prototype),e.prototype.constructor=e,e):function(){f&&v.apply(d,arguments)}):b}function d(a,b,c){var d,e,f;if(a._callbacks&&a._callbacks[b]){for(d=a._callbacks[b],e=0,f=d.length;f>e;e+=1)d[e].call(null,c);return a}}function e(a,d,e,f,g){var h;return d._callbacks||(d._callbacks={}),d._callbacks[e]||(d._callbacks[e]=[]),h=g&&g.scheduler||b.Schedulers.scheduleNext,a=a||c(),d._callbacks[e].push(h.bind(null,a,f)),a}var f={};return f.es5=C,f.defer=a,f.notify=d,f.subscribe=e,f}(),b}(window),function(a){"use strict";function b(b,c){return a.X.defer({target:b},c)}function c(b){return a.X.defer(null,function(){a.prototype.accept.apply(b,arguments)})}function d(b){return a.X.defer(null,function(){a.prototype.reject.apply(b,arguments)})}function e(b){return a.X.defer(null,function(){a.prototype.doReturn.apply(b,arguments)})}function f(b){return a.X.defer(null,function(){b.settle()})}function g(b){return a.X.defer(null,function(){a.prototype.doThrow.apply(b,arguments)})}function h(b,c){var d;return c?(d=function(){var a=i.call(arguments,0);return a.unshift(this),c.apply(null,a)},a.X.defer({target:b},d)):a.X.defer(null,function(){var c=i.call(arguments,0);c.unshift(this),a.prototype.doReturn.apply(b,c)})}var i=Array.prototype.slice;a.defer=b,a.deferAccept=c,a.deferReject=d,a.deferReturn=e,a.deferSettle=f,a.deferThrow=g,a.deferWith=h}(Tab);